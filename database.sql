CREATE DATABASE PIM

GO

USE PIM

CREATE TABLE EMPLOYEE (
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	VISA CHAR(3) NOT NULL UNIQUE,
	FIRST_NAME VARCHAR(50) NOT NULL,
	LAST_NAME VARCHAR(50) NOT NULL,
	BIRTH_DATE DATE NOT NULL,
)

CREATE TABLE [GROUP] (
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	GROUP_LEADER_ID BIGINT NOT NULL REFERENCES EMPLOYEE(ID) UNIQUE,
)

CREATE TABLE PROJECT (
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	GROUP_ID BIGINT NOT NULL REFERENCES [GROUP](ID),
	PROJECT_NUMBER INT NOT NULL UNIQUE,
	NAME VARCHAR(50) NOT NULL,
	CUSTOMER VARCHAR(50) NOT NULL,
	STATUS CHAR(3) NOT NULL,
	START_DATE DATE NOT NULL,
	END_DATE DATE,
)

CREATE TABLE PROJECT_EMPLOYEE (
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	PROJECT_ID BIGINT NOT NULL REFERENCES PROJECT(ID),
	EMPLOYEE_ID BIGINT NOT NULL REFERENCES EMPLOYEE(ID),
)

SELECT * FROM EMPLOYEE;
SELECT * FROM [GROUP];
SELECT * FROM PROJECT;
SELECT * FROM PROJECT_EMPLOYEE;

INSERT INTO EMPLOYEE(VISA, FIRST_NAME, LAST_NAME, BIRTH_DATE) VALUES
('HUA', 'HAI', 'NGUYEN THANH', '1997-09-02'),
('BHT', 'BINH', 'HUYNH THANH', '1998-05-30'),
('LAV', 'LUC', 'PHAM VIET', '1998-01-18'),
('DRG', 'DUNG', 'TRAN CONG TAN', '1998-12-03'),
('DGG', 'DUY', 'NGUYEN GIAP PHUONG', '1998-09-20'),
('CAN', 'CANH', 'NGO ANH', '1998-05-19'),
('DNM', 'DUC', 'NGUYEN MINH', '1998-12-13'),
('NPT', 'NAM', 'PHAN TRAN XUAN', '1998-01-07'),
('PRH', 'PHONG', 'TRAN HAI', '1998-06-06'),
('KTM', 'KHA', 'TRAN MINH', '1998-10-28'),
('KDQ', 'KHAI', 'DAM QUANG', '1998-03-09'),
('TAV', 'THUC', 'HOANG VAN', '1998-09-19'),
('TRV', 'THOI', 'TRAN VAN', '1970-01-01'),
('TBG', 'BAO', 'NGUYEN TAN', '1970-01-01'),
('TTB', 'TUNG', 'BUI THANH', '1970-01-01'),
('VVH', 'VU', 'VO HOANG ANH', '1970-01-01'),
('NLQ', 'NHAT', 'LE QUANG', '1997-09-24'),
('DVM', 'DANG', 'VU MINH', '1998-12-21'),
('BVT', 'BACH', 'VU TUONG', '1998-12-11'),
('DPT', 'DUY', 'PHAN TRAN THE', '1998-09-23'),
('CTM', 'CANH', 'TRAN MINH', '1998-04-21'),
('ANB', 'AN', 'NGUYEN BINH', '1998-12-15'),
('BNT', 'BACH', 'NGUYEN LE TUNG', '1998-10-11'),
('NTH', 'NGOC', 'TRAN HANH', '1998-02-15'),
('NTM', 'NHUT', 'TRAN MINH', '1998-10-11'),
('PTV', 'PHAT', 'TRUONG VY', '1998-11-18'),
('PPA', 'PHU', 'PHAM ANH', '1998-11-20'),
('PND', 'PHU', 'NGHIEM DUC', '1998-01-01'),
('PTT', 'PHUC', 'TRAN TRONG', '1998-12-06'),
('PTD', 'PHUC', 'TRINH DAI', '1998-08-10'),
('CLN', 'CHINH', 'LUU NGHIEP', '1998-10-30'),
('HVU', 'HAI', 'VU', '1998-12-27'),
('CPV', 'CHUAN', 'PHAM VAN', '1998-09-29'),
('DPV', 'DAO', 'PHAM VIET MINH', '1998-05-21'),
('DNA', 'DAT', 'NGUYEN ANH', '1998-01-26'),
('HND', 'HAI', 'NGUYEN DUC', '1998-03-13'),
('QPN', 'QUANG', 'PHAN NHAT', '1998-10-22'),
('QNM', 'QUANG', 'NGUYEN MINH', '1998-04-24'),
('TDD', 'TAI', 'DANG DUC', '1998-06-07'),
('THQ', 'THINH', 'HUYNH QUOC', '1998-09-26');

INSERT INTO [GROUP](GROUP_LEADER_ID) VALUES
(13),(14),(15);

SELECT IDENT_CURRENT('EMPLOYEE') + 1

